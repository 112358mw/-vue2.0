<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>

<body>

    <div id='p'></div>

    <div id='p1'></div>
    <script>
        //看这个例子, promise.then的微任务会在 当前任务执行完后, 渲染之前的中间段执行
        // 如果用setTimout 会在新的任务执行, 再进行一次渲染到页面, 浏览器一般是17ms渲染一次,
        //除非一个任务运行时间过长才会阻断当前页面渲染, 造成丢帧的情况
        //一般一个帧内的多次DOM改动会被合并渲染, 现代浏览器做了优化
        var p = document.getElementById('p');
        var p1 = document.getElementById('p1');

        setTimeout(function () {
          
            alert('settiemout')
             
            p.innerHTML= 22222;
            p1.innerHTML = 'p22222'

            alert('等等再渲染')
          
        }, 0);
        new Promise(function (resolve) {
              
            resolve();
           
        }).then(function () {
            p.innerHTML = "1111";
            p1.innerHTML = 'p11111'
            alert(1)
        });
        
      
        alert(0)
   


    </script>
</body>

</html>